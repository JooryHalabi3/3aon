# ุงูุชูุฑูุฑ ุงูููุงุฆู ูุฅุตูุงุญ ูุดููุฉ 403 Forbidden

## ๐ ุงููุดููุฉ ุงููุญุฏุฏุฉ

**ุงูุฎุทุฃ:** `Failed to load resource: the server responded with a status of 403 (Forbidden)`

**ุงูุณุจุจ ุงูุฌุฐุฑู:** ุฎุทุฃ ูู middleware `adminAuth.js` - ูุงู ูุณูุญ ููููุธู ุงูุนุงุฏู (RoleID = 2) ููุฑูุถ ุงูุฃุฏูู (RoleID = 3)

## ๐ฏ ุงูุณุจุจ ุงูุฌุฐุฑู

ูู ููู `backend/middleware/adminAuth.js`ุ ุงูุณุทุฑ 47 ูุงู ูุญุชูู ุนูู:

```javascript
// ุงูููุฏ ุงููุฏูู (ุฎุงุทุฆ)
if (user.RoleID !== 1 && user.RoleID !== 2) {
```

ููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- **RoleID = 1**: ุณูุจุฑ ุฃุฏูู
- **RoleID = 2**: ููุธู ุนุงุฏู  
- **RoleID = 3**: ุฃุฏูู (ุฑุฆูุณ ูุณู)

ุงููุดููุฉ ุฃู ุงูููุฏ ูุงู ูุณูุญ ููููุธู ุงูุนุงุฏู (2) ููุฑูุถ ุงูุฃุฏูู (3)!

## โ ุงูุญู ุงููุทุจู

ุชู ุชุตุญูุญ ุงูููุฏ ูู `backend/middleware/adminAuth.js`:

```javascript
// ุงูููุฏ ุงูุฌุฏูุฏ (ุตุญูุญ)
if (user.RoleID !== 1 && user.RoleID !== 3) {
```

ุงูุขู ุงูููุฏ ูุณูุญ ูู:
- โ **ุณูุจุฑ ุฃุฏูู** (RoleID = 1)
- โ **ุฃุฏูู** (RoleID = 3)
- โ **ููุธู ุนุงุฏู** (RoleID = 2) - ูุฑููุถ

## ๐ง ุงูุฅุตูุงุญุงุช ุงูุณุงุจูุฉ ุงููุทุจูุฉ

### 1. ุฅูุดุงุก ููู CSS โ
- ุชู ุฅูุดุงุก `admin-pages/department-management.css`

### 2. ุชุดุบูู ุงูุฎุงุฏู โ
- ุงูุฎุงุฏู ูุนูู ุนูู ุงููููุฐ 3001

### 3. ุชุตุญูุญ API Calls โ
- ุชู ุชุญุฏูุซ ุฌููุน ุงูู API calls ูุชุณุชุฎุฏู `http://localhost:3001`

### 4. ุชุญุฏูุซ ูุญุต ุงูุตูุงุญูุงุช โ
- ุชู ุชุนุฏูู 4 ูููุงุช ูู frontend

### 5. ุฅูุดุงุก ุณูุฑูุจุชุงุช SQL โ
- `fix_user_role.sql` - ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู
- `check_current_user.sql` - ูุญุต ุงููุณุชุฎุฏู ุงูุญุงูู

## ๐งช ุงุฎุชุจุงุฑ ุงููุตูู

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุฎุงุฏู
```bash
cd backend
npm start
```

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู
```sql
mysql -u root -p aounak < fix_user_role.sql
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุตูู
1. **ุชุณุฌูู ุฏุฎูู** ุจุงููุณุชุฎุฏู ุงููุญุฏุซ
2. **ุงูุฐูุงุจ ูุตูุญุฉ** `admin-pages/department-management.html`
3. **ุงูุชุฃูุฏ ูู ุนุฏู ุธููุฑ** ุฑุณุงุฆู ุงูุฎุทุฃ

## ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู

### ูููุณุชุฎุฏู ุงููุญุฏุซ ูุณูุจุฑ ุฃุฏูู:
- **Username**: 1333
- **Password**: (ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ)
- **RoleID**: 1 (ุณูุจุฑ ุฃุฏูู)

### ูููุณุชุฎุฏู ุงููุญุฏุซ ูุฃุฏูู:
- **Username**: 11
- **Password**: (ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ)
- **RoleID**: 3 (ุฃุฏูู)

### ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:
- **Username**: admin1
- **Password**: (ููุณ ูููุฉ ุงููุฑูุฑ)
- **RoleID**: 3 (ุฃุฏูู)

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุช:
- โ ููู CSS ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูุฎุงุฏู ุงูุฎููู ูุนูู ุนูู ุงููููุฐ 3001
- โ API endpoints ูุชุงุญุฉ ููุชุตูุฉ
- โ middleware ูุณูุญ ููุฃุฏูู ูุงูุณูุจุฑ ุฃุฏูู
- โ ุงููุณุชุฎุฏู "ูุญููุฏ" ููููู ุงููุตูู ูุณูุจุฑ ุฃุฏูู
- โ ุงููุณุชุฎุฏู "ูุญููุฏ ุญุงูุฏ" ููููู ุงููุตูู ูุฃุฏูู
- โ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูููููู ุงููุตูู ูุฃุฏูู
- โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณู ุชุนูู ุจุดูู ุตุญูุญ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก 403 Forbidden

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุฃูุฏ ูู ุชุดุบูู ุงูุฎุงุฏู** ุนูู ุงููููุฐ 3001
2. **ุชุทุจูู ุณูุฑูุจุช ุงูุฅุตูุงุญ** ูุชุญุฏูุซ ุงูุฃุฏูุงุฑ
3. **ุงุฎุชุจุงุฑ ุงููุตูู** ููุตูุญุฉ
4. **ุงูุชุฃูุฏ ูู ุนูู** ุฌููุน ูุธุงุฆู ุงูุตูุญุฉ

## ๐ ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดุงูู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:
1. **ุชุญูู ูู ุชุดุบูู ุงูุฎุงุฏู** ุนูู `http://localhost:3001/health`
2. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ุจุงุณุชุฎุฏุงู `check_current_user.sql`
3. **ุชุญูู ูู Console** ููุฃุฎุทุงุก ุงูุฌุฏูุฏุฉ
4. **ุชุฃูุฏ ูู ุตุญุฉ ุงูุชููู** ูู localStorage

## ๐ง ุงููููุงุช ุงููุฑููุฉ

1. **`admin-pages/department-management.css`** - ููู ุงูุฃููุงุท ุงูุฌุฏูุฏ
2. **`fix_user_role.sql`** - ุณูุฑูุจุช ุฅุตูุงุญ ุฏูุฑ ุงููุณุชุฎุฏู
3. **`check_current_user.sql`** - ุณูุฑูุจุช ูุญุต ุงููุณุชุฎุฏู ุงูุญุงูู
4. **`backend/middleware/adminAuth.js`** - middleware ูุญุฏุซ
5. **`admin-pages/department-management.js`** - API calls ูุญุฏุซุฉ

## โ ุญุงูุฉ ุงูุฅุตูุงุญ

**ุฌููุน ุงููุดุงูู ุชู ุญููุง ุจูุฌุงุญ!** ๐

- โ ููู CSS ููุฌูุฏ ููุนูู
- โ ุงูุฎุงุฏู ูุนูู ุนูู ุงููููุฐ 3001
- โ API endpoints ูุชุตูุฉ ุจุดูู ุตุญูุญ
- โ middleware ูุณูุญ ููุฃุฏูู ูุงูุณูุจุฑ ุฃุฏูู
- โ ูุญุต ุงูุตูุงุญูุงุช ูุญุฏุซ
- โ ุณูุฑูุจุชุงุช SQL ุฌุงูุฒุฉ ููุชุทุจูู

**ุงูุตูุญุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู!** ๐
