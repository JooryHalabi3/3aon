# تعليمات اختبار صفحة بيانات الموظفين

## الوصف
تم ربط صفحة بيانات الموظفين بقاعدة البيانات لعرض جميع بيانات الموظفين من جدول `employees` مع إمكانيات الفلترة والبحث.

## الميزات المتاحة

### 1. عرض بيانات الموظفين
- **الرقم الوظيفي**: معرف فريد لكل موظف
- **الاسم الكامل**: اسم الموظف بالكامل
- **البريد الإلكتروني**: عنوان البريد الإلكتروني
- **رقم الهوية**: رقم الهوية الوطنية
- **القسم**: اسم القسم الذي يعمل به الموظف
- **الوظيفة**: دور الموظف (سوبر أدمن، موظف، أدمن رئيس قسم)
- **اسم المستخدم**: اسم المستخدم في النظام
- **الحالة**: حالة الموظف (نشط)
- **تاريخ التعيين**: تاريخ بداية العمل

### 2. الإحصائيات
- إجمالي الموظفين
- الموظفين النشطين
- عدد الأقسام
- المديرين (سوبر أدمن + أدمن)

### 3. الفلترة والبحث
- **فلتر القسم**: عرض موظفي قسم معين
- **فلتر الوظيفة**: عرض موظفين بدور معين
- **فلتر الحالة**: عرض الموظفين النشطين أو غير النشطين
- **البحث**: البحث في الأسماء، الإيميلات، أرقام الهوية، والأرقام الوظيفية

### 4. الإجراءات المتاحة
- **دخول**: الدخول كموظف آخر (مع تسجيل الإجراء)
- **تعديل**: تعديل بيانات الموظف (قريباً)
- **حذف**: تعطيل حساب الموظف

## كيفية الاختبار

### الخطوة 1: تسجيل الدخول
```
URL: http://localhost:3001/login/home.html
Super Admin: 12341 / admin123
Employee: 1333 / admin123
Admin: 11 / admin123
```

### الخطوة 2: الوصول لصفحة بيانات الموظفين
```
URL: http://localhost:3001/admin/employee-data.html
```

### الخطوة 3: التحقق من البيانات
1. تأكد من ظهور الإحصائيات في الأعلى
2. تحقق من عرض جدول الموظفين مع البيانات
3. اختبر الفلاتر المختلفة
4. جرب البحث في البيانات

### الخطوة 4: اختبار الوظائف
1. **اختبار الفلترة**:
   - اختر قسماً من قائمة الأقسام
   - اختر دوراً من قائمة الأدوار
   - اختر حالة من قائمة الحالات

2. **اختبار البحث**:
   - ابحث عن اسم موظف
   - ابحث عن إيميل
   - ابحث عن رقم وظيفي

3. **اختبار الإجراءات**:
   - جرب زر "دخول" للدخول كموظف آخر
   - جرب زر "حذف" لتعطيل موظف

## API Endpoints المستخدمة

### 1. جلب الموظفين
```
GET /api/admin/employees
Authorization: Bearer {token}
```

### 2. جلب الإحصائيات
```
GET /api/admin/employees/stats
Authorization: Bearer {token}
```

### 3. جلب الأقسام
```
GET /api/admin/departments
Authorization: Bearer {token}
```

### 4. الدخول كموظف
```
POST /api/admin/employees/{id}/login-as
Authorization: Bearer {token}
```

### 5. حذف موظف
```
DELETE /api/admin/employees/{id}
Authorization: Bearer {token}
```

## البيانات التجريبية
تحتوي قاعدة البيانات على بيانات تجريبية تشمل:
- 3 موظفين في أقسام مختلفة
- 70 قسم مختلف (طوارئ، جراحة، باطنية، إلخ)
- أدوار مختلفة (سوبر أدمن، موظف، أدمن رئيس قسم)

## استكشاف الأخطاء

### إذا لم تظهر البيانات:
1. تأكد من تسجيل الدخول
2. تحقق من وحدة تحكم المتصفح (F12)
3. تأكد من أن الخادم يعمل على المنفذ 3001
4. تحقق من أن قاعدة البيانات تحتوي على بيانات

### إذا ظهرت رسالة "لا توجد بيانات موظفين":
1. تحقق من قاعدة البيانات
2. تأكد من تشغيل ملف `database_updates.sql`
3. تحقق من الاتصال بقاعدة البيانات

### إذا لم تعمل الفلاتر:
1. تحقق من تحميل الأقسام
2. تأكد من وجود بيانات في جدول `departments`

## الملفات ذات الصلة
- `admin/employee-data.html`: صفحة HTML
- `admin/employee-data.js`: منطق JavaScript
- `admin/employee-data.css`: تنسيق CSS
- `backend/routes/adminRoutes.js`: API endpoints
- `database_updates.sql`: بيانات قاعدة البيانات

## النتيجة المتوقعة
بعد اتباع التعليمات، يجب أن تظهر صفحة بيانات الموظفين مع:
- إحصائيات دقيقة
- جدول يحتوي على جميع الموظفين
- فلاتر تعمل بشكل صحيح
- إمكانية البحث والفلترة
- أزرار الإجراءات تعمل بشكل سليم
