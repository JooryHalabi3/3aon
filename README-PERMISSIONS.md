# ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุงูุชุญูู ูู ุงููุตูู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุงูุชุญูู ูู ุงููุตูู ูุทุจู ุนูู ุฌููุน ุตูุญุงุช ุงููุธุงู. ุงููุธุงู ูุถูู ุงูุฃูุงู ูุงูุชุญูู ูู ุงูุจูุงูุงุช ุญุณุจ ุฏูุฑ ุงููุณุชุฎุฏู.

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช (`js/common/permissions.js`)

#### ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ
- **ุณูุจุฑ ุฃุฏูู (RoleID = 1)**: ูุตูู ูุงูู ูุฌููุน ุงูุจูุงูุงุช ูุงููุธุงุฆู
- **ุฃุฏูู (RoleID = 3)**: ูุตูู ูุจูุงูุงุช ูุณูู ููุท
- **ููุธู (RoleID = 2)**: ูุตูู ูุจูุงูุงุชู ุงูุฎุงุตุฉ ูุงูุดูุงูู ุงูุนุงูุฉ

#### ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ
- `canAccessPage(pageType)`: ูุญุต ุฅููุงููุฉ ุงููุตูู ููุตูุญุฉ
- `canAccessData(dataType, departmentID)`: ูุญุต ุฅููุงููุฉ ุงููุตูู ููุจูุงูุงุช
- `canPerformOperation(operation)`: ูุญุต ุฅููุงููุฉ ุชูููุฐ ุงูุนูููุฉ
- `applyDataRestrictions(data, dataType)`: ุชุทุจูู ูููุฏ ุงูุจูุงูุงุช ุญุณุจ ุงูุฏูุฑ

#### ุฃููุงุน ุงูุนูููุงุช
- `Create`: ุฅูุดุงุก ุจูุงูุงุช ุฌุฏูุฏุฉ
- `Update`: ุชุญุฏูุซ ุงูุจูุงูุงุช
- `Delete`: ุญุฐู ุงูุจูุงูุงุช
- `Assign`: ุชุนููู ููุงู
- `StatusChange`: ุชุบููุฑ ุงูุญุงูุฉ
- `PermissionChange`: ุชุบููุฑ ุงูุตูุงุญูุงุช
- `AccessDenied`: ุฑูุถ ุงููุตูู
- `Login/Logout`: ุชุณุฌูู ุงูุฏุฎูู/ุงูุฎุฑูุฌ

### 2. ูุธุงู ุงูุชุฐููุฑ ูุงูุชุตุนูุฏ (`js/common/permissions.js`)

#### ููุทู ุงูุชุฐููุฑ
- **ุจุนุฏ 3 ุฃูุงู**: ุชุฐููุฑ ุฃูู ููููุธู ุงููุนูู
- **ุจุนุฏ 6 ุฃูุงู**: ุชุฐููุฑ ุซุงูู ููููุธู
- **ุจุนุฏ 9 ุฃูุงู**: ุชุตุนูุฏ ููุฃุฏูู

#### ุงููุธุงุฆู
- `checkReminderNeeded(complaint)`: ูุญุต ุงูุญุงุฌุฉ ููุชุฐููุฑ
- `createReminder(complaintID, employeeID, type)`: ุฅูุดุงุก ุชุฐููุฑ
- `checkAllComplaints()`: ูุญุต ุฌููุน ุงูุดูุงูู

### 3. ูุธุงู ุงูุชูุจููุงุช (`js/common/notifications.js`)

#### ุฃููุงุน ุงูุชูุจููุงุช
- `success`: ูุฌุงุญ ุงูุนูููุฉ
- `error`: ุฎุทุฃ ูู ุงูุนูููุฉ
- `warning`: ุชุญุฐูุฑ
- `info`: ูุนูููุงุช
- `urgent`: ุนุงุฌู
- `complaint`: ุดููู
- `reminder`: ุชุฐููุฑ
- `permission`: ุตูุงุญูุงุช
- `system`: ูุธุงู
- `security`: ุฃูุงู

#### ุงููุธุงุฆู
- `show(type, title, message, options)`: ุนุฑุถ ุชูุจูู
- `success/error/warning/info()`: ุชูุจููุงุช ุณุฑูุนุฉ
- `custom(config)`: ุชูุจูู ูุฎุตุต

### 4. ุตูุญุฉ ุงููุตูู ุงููุฑููุถ (`login/403.html`)

ุตูุญุฉ ูุฎุตุตุฉ ูุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ 403 ุนูุฏ ูุญุงููุฉ ุงููุตูู ูุตูุญุฉ ูุญุธูุฑุฉ.

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงุณุชูุฑุงุฏ ุงููุธุงู ูู ุงูุตูุญุฉ

```javascript
import { permissionManager, reminderSystem, OPERATION_TYPES } from '../js/common/permissions.js';
import { notificationManager } from '../js/common/notifications.js';
```

### 2. ูุญุต ุงููุตูู ููุตูุญุฉ

```javascript
// ูุญุต ุงููุตูู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
if (!permissionManager.checkPageAccess('admin-panel')) {
  return; // ุณูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุชููุงุฆูุงู
}
```

### 3. ุชุทุจูู ูููุฏ ุงูุจูุงูุงุช

```javascript
// ุฌูุจ ุงูุจูุงูุงุช
const response = await fetch('/api/complaints');
const data = response.data;

// ุชุทุจูู ุงููููุฏ ุญุณุจ ุงูุฏูุฑ
const filteredData = permissionManager.applyDataRestrictions(data, 'complaints');
```

### 4. ูุญุต ุงูุตูุงุญูุงุช

```javascript
// ูุญุต ุฅููุงููุฉ ุญุฐู ููุธู
if (permissionManager.canPerformOperation('delete_employee')) {
  // ุชูููุฐ ุงูุนูููุฉ
} else {
  notificationManager.error('ูุง ุชูุฌุฏ ุตูุงุญูุฉ', 'ูุง ููููู ุญุฐู ุงูููุธููู');
}
```

### 5. ุชุณุฌูู ุงููุดุงุท

```javascript
// ุชุณุฌูู ูุดุงุท ุฅูุดุงุก ุดููู
await permissionManager.logActivity(
  OPERATION_TYPES.CREATE,
  'ุชู ุฅูุดุงุก ุดููู ุฌุฏูุฏุฉ',
  complaintID,
  'complaint'
);
```

### 6. ุฅูุดุงุก ุชูุจูู

```javascript
// ุฅูุดุงุก ุชูุจูู ูุฌุงุญ
notificationManager.success(
  'ุชู ุงูุญูุธ ุจูุฌุงุญ',
  'ุชู ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช'
);

// ุฅูุดุงุก ุชูุจูู ุนุงุฌู
notificationManager.urgent(
  'ุชูุจูู ุฃููู',
  'ุชู ุงูุชุดุงู ูุญุงููุฉ ูุตูู ุบูุฑ ูุตุฑุญ',
  { autoHide: false }
);
```

## ููุงุนุฏ ุงูุฃูุงู

### 1. ููุน ุงููุตูู ุงููุจุงุดุฑ
- ุฅุฎูุงุก ุงูุฃููููุงุช/ุงูุฑูุงุจุท ูุง ูููู
- ูุญุต ุงูุตูุงุญูุงุช ุนูุฏ ุชุญููู ูู ุตูุญุฉ
- ุฅุนุงุฏุฉ ุงูุชูุฌูู ูุตูุญุฉ 403 ุนูุฏ ุฑูุถ ุงููุตูู

### 2. ูููุฏ ุงูุจูุงูุงุช
- **ุงูุณูุจุฑ ุฃุฏูู**: ูุตูู ูุงูู
- **ุงูุฃุฏูู**: ุจูุงูุงุช ูุณูู ููุท
- **ุงูููุธู**: ุจูุงูุงุชู ุงูุฎุงุตุฉ ููุท

### 3. ุชุณุฌูู ุฌููุน ุงูุนูููุงุช
- ูู ุนูููุฉ ุชูุณุฌู ูุน ุงูุชูุงุตูู
- ุชุณุฌูู ูุญุงููุงุช ุงููุตูู ุงููุฑููุถ
- ุญูุธ ุณุฌูุงุช ุงูุฃูุงู

### 4. ุงูุชุฐููุฑ ูุงูุชุตุนูุฏ
- ูุธุงู ุชููุงุฆู ููุชุฐููุฑ
- ุชุตุนูุฏ ุชููุงุฆู ููุฃุฏูู
- ุฅุดุนุงุฑุงุช ููุฑูุฉ ูููุณุชุฎุฏููู

## ุงูุตูุญุงุช ุงููุญููุฉ

### ุงูุณูุจุฑ ุฃุฏูู ููุท
- `admin-panel`: ููุญุฉ ุงูุชุญูู
- `employee-data`: ุจูุงูุงุช ุงูููุธููู
- `permissions`: ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- `logs`: ุณุฌูุงุช ุงููุธุงู
- `recycle-bin`: ุณูุฉ ุงููุญุฐููุงุช

### ุงูุฃุฏูู ููุท
- `department-management`: ุฅุฏุงุฑุฉ ุงููุณู

### ูุชุงุญุฉ ููุฌููุน
- `home`: ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `new-complaint`: ุฅูุดุงุก ุดููู
- `followup`: ูุชุงุจุนุฉ ุงูุดูุงูู
- `general-complaints`: ุงูุดูุงูู ุงูุนุงูุฉ

## ุงูุชุฎุตูุต

### ุฅุถุงูุฉ ููุน ุชูุจูู ุฌุฏูุฏ

```javascript
// ูู notifications.css
.notification-custom {
  background: linear-gradient(135deg, #your-color, #your-color-2);
}

// ูู notifications.js
getIcon(type) {
  const icons = {
    // ... ุงูุฃููุงุน ุงูููุฌูุฏุฉ
    custom: '๐ง'
  };
  return icons[type] || icons.info;
}
```

### ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ

```javascript
// ูู permissions.js
const OPERATION_TYPES = {
  // ... ุงูุนูููุงุช ุงูููุฌูุฏุฉ
  CUSTOM_OPERATION: 'CustomOperation'
};

// ูู canPerformOperation
case 'custom_operation':
  return this.isSuperAdmin() || this.isAdmin();
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

1. **ุฎุทุฃ ูู ุงุณุชูุฑุงุฏ ุงููููุงุช**
   - ุชุฃูุฏ ูู ุตุญุฉ ูุณุงุฑ ุงููููุงุช
   - ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `type="module"` ูู script tag

2. **ุฎุทุฃ ูู ูู ุชุดููุฑ Token**
   - ุชุฃูุฏ ูู ุตุญุฉ format ุงูู token
   - ุชุฃูุฏ ูู ูุฌูุฏ `roleID` ู `departmentID` ูู payload

3. **ุนุฏู ุธููุฑ ุงูุชูุจููุงุช**
   - ุชุฃูุฏ ูู ุชุถููู ููู CSS
   - ุชุฃูุฏ ูู ุชููุฆุฉ `notificationManager`

### ุฑุณุงุฆู ุงูุชุตุญูุญ

```javascript
// ุชูุนูู ุฑุณุงุฆู ุงูุชุตุญูุญ
console.log('User Role:', permissionManager.currentRole);
console.log('User Department:', permissionManager.currentDepartment);
console.log('Can Access Admin:', permissionManager.canAccessPage('admin-panel'));
```

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุงูููุฒุงุช ุงููุฎุทุท ููุง
- ูุธุงู ุฃุฏูุงุฑ ูุฎุตุตุฉ
- ุตูุงุญูุงุช ุฏููุงููููุฉ
- ุชูุงุฑูุฑ ุฃูุงู ููุตูุฉ
- ูุธุงู ุชูุจููุงุช ูุชูุฏู
- ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช

### ุงูุชูุงูู ูุน ุฃูุธูุฉ ุฃุฎุฑู
- ูุธุงู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ุงูุงุฌุชูุงุนู
- ูุธุงู ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
- ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู

## ุงูุฏุนู

ููุงุณุชูุณุงุฑุงุช ุฃู ุงููุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ ุฃู ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงููุธุงู ููุญุตูู ุนูู ูุฒูุฏ ูู ุงูุชูุงุตูู.
