# ุชูุฑูุฑ ุฅุตูุงุญ ูุดููุฉ ุฏูุฑ ุงููุณุชุฎุฏู

## ๐ ุงููุดููุฉ ุงููุญุฏุฏุฉ

ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุงููุตูู ูุตูุญุฉ `admin-pages/department-management.html` ููุธูุฑ ุฎุทุฃ 403 Forbidden ูุน ุฑุณุงูุฉ "ูุฐู ุงูุตูุญุฉ ูุฎุตุตุฉ ูู Admin ููุท".

## ๐ฏ ุงูุณุจุจ ุงูุฌุฐุฑู

ุจุนุฏ ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช `aounak.sql`ุ ุชุจูู ุฃู ุงููุดููุฉ ูู **ุฏูุฑ ุงููุณุชุฎุฏู ุงูุญุงูู**:

### ุงูุจูุงูุงุช ุงูุญุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

**ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ:**
- **RoleID = 1**: ุณูุจุฑ ุฃุฏูู
- **RoleID = 2**: ููุธู  
- **RoleID = 3**: ุฃุฏูู (ุฑุฆูุณ ูุณู)

**ุงูููุธููู ุงูุญุงูููู:**
- **EmployeeID = 1**: ุฌูุฏ (Username: 12341) - **RoleID = 1** โ (ุณูุจุฑ ุฃุฏูู)
- **EmployeeID = 2**: ูุญููุฏ (Username: 1333) - **RoleID = 2** โ (ููุธู ุนุงุฏู)
- **EmployeeID = 3**: ูุญููุฏ ุญุงูุฏ (Username: 11) - **RoleID = 2** โ (ููุธู ุนุงุฏู)

## ๐จ ุงููุดููุฉ

ุงููุณุชุฎุฏู ุงูุญุงูู (ูุญููุฏ ุฃู ูุญููุฏ ุญุงูุฏ) ูู `RoleID = 2` (ููุธู ุนุงุฏู)ุ ุจูููุง ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณู ุชุชุทูุจ `RoleID = 1` (ุณูุจุฑ ุฃุฏูู) ุฃู `RoleID = 3` (ุฃุฏูู).

## โ ุงูุญููู ุงููุชุงุญุฉ

### ุงูุญู ุงูุฃูู: ุชุญุฏูุซ ุฏูุฑ ุงููุณุชุฎุฏู ุงูุญุงูู

```sql
-- ุชุญุฏูุซ ุงููุณุชุฎุฏู "ูุญููุฏ" ููููู ุณูุจุฑ ุฃุฏูู
UPDATE employees 
SET RoleID = 1 
WHERE Username = '1333' AND FullName = 'ูุญููุฏ';

-- ุชุญุฏูุซ ุงููุณุชุฎุฏู "ูุญููุฏ ุญุงูุฏ" ููููู ุฃุฏูู
UPDATE employees 
SET RoleID = 3, DepartmentID = 1 
WHERE Username = '11' AND FullName = 'ูุญููุฏ ุญุงูุฏ';
```

### ุงูุญู ุงูุซุงูู: ุฅูุดุงุก ูุณุชุฎุฏููู ุฌุฏุฏ ููุงุฎุชุจุงุฑ

```sql
-- ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ ูุฃุฏูู ููุงุฎุชุจุงุฑ
INSERT INTO employees (FullName, Username, PasswordHash, Email, PhoneNumber, RoleID, DepartmentID, Specialty)
VALUES 
('ุฃุญูุฏ ูุญูุฏ', 'admin1', '$2b$10$VODCmMhKpziOmCsnn2lhF..an7g827NjFmXng5AtNjwKngPQyRpjS', 'admin1@test.com', '0500000001', 3, 1, 'ูุฏูุฑ ูุณู'),
('ูุงุทูุฉ ุนูู', 'admin2', '$2b$10$VODCmMhKpziOmCsnn2lhF..an7g827NjFmXng5AtNjwKngPQyRpjS', 'admin2@test.com', '0500000002', 3, 2, 'ูุฏูุฑ ูุณู');
```

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ูุญุต ุงููุณุชุฎุฏู ุงูุญุงูู
```sql
-- ุชุดุบูู ูุฐุง ุงูุณูุฑูุจุช ููุนุฑูุฉ ุฏูุฑ ุงููุณุชุฎุฏู ุงูุญุงูู
SELECT 
    e.EmployeeID,
    e.FullName,
    e.Username,
    e.Email,
    r.RoleName,
    e.RoleID,
    d.DepartmentName,
    e.DepartmentID
FROM employees e
JOIN roles r ON e.RoleID = r.RoleID
LEFT JOIN departments d ON e.DepartmentID = d.DepartmentID
ORDER BY e.EmployeeID;
```

### ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุฅุตูุงุญ
```bash
# ุชุดุบูู ุณูุฑูุจุช ุงูุฅุตูุงุญ
mysql -u root -p aounak < fix_user_role.sql
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุตูู
1. **ุชุณุฌูู ุฏุฎูู** ุจุงููุณุชุฎุฏู ุงููุญุฏุซ
2. **ุงูุฐูุงุจ ูุตูุญุฉ** `admin-pages/department-management.html`
3. **ุงูุชุฃูุฏ ูู ุนุฏู ุธููุฑ** ุฑุณุงูุฉ "ุฑูุถ ุงููุตูู"

## ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ููุงุฎุชุจุงุฑ

### ูููุณุชุฎุฏู ุงููุญุฏุซ ูุณูุจุฑ ุฃุฏูู:
- **Username**: 1333
- **Password**: (ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ)
- **RoleID**: 1 (ุณูุจุฑ ุฃุฏูู)

### ูููุณุชุฎุฏู ุงููุญุฏุซ ูุฃุฏูู:
- **Username**: 11
- **Password**: (ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ)
- **RoleID**: 3 (ุฃุฏูู)

### ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:
- **Username**: admin1
- **Password**: (ููุณ ูููุฉ ุงููุฑูุฑ)
- **RoleID**: 3 (ุฃุฏูู)

## ๐ง ุงููููุงุช ุงููุฑููุฉ

1. **`fix_user_role.sql`** - ุณูุฑูุจุช ุฅุตูุงุญ ุฏูุฑ ุงููุณุชุฎุฏู
2. **`check_current_user.sql`** - ุณูุฑูุจุช ูุญุต ุงููุณุชุฎุฏู ุงูุญุงูู

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญ:
- โ ุงููุณุชุฎุฏู "ูุญููุฏ" ููููู ุงููุตูู ูุณูุจุฑ ุฃุฏูู
- โ ุงููุณุชุฎุฏู "ูุญููุฏ ุญุงูุฏ" ููููู ุงููุตูู ูุฃุฏูู
- โ ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูููููู ุงููุตูู ูุฃุฏูู
- โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณู ุชุนูู ุจุดูู ุตุญูุญ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุดุบูู ุณูุฑูุจุช ุงููุญุต** ููุนุฑูุฉ ุงููุณุชุฎุฏู ุงูุญุงูู
2. **ุชุทุจูู ุณูุฑูุจุช ุงูุฅุตูุงุญ** ูุชุญุฏูุซ ุงูุฃุฏูุงุฑ
3. **ุงุฎุชุจุงุฑ ุงููุตูู** ููุตูุญุฉ
4. **ุงูุชุฃูุฏ ูู ุนูู** ุฌููุน ูุธุงุฆู ุงูุตูุญุฉ
