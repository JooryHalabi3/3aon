<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إدارة صلاحيات السوبر أدمن - عونك</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="permissions.css">
</head>
<body>
  <div class="back-button">
    <a href="/superAdmin/superAdmin.html">
      <img src="/icon/Back.png" alt="Back Icon" class="back-icon" />
      <span data-ar="عودة" data-en="Back">عودة</span>
    </a>
  </div>

  <header class="header">
    <div class="header-content">
      <div class="header-title" data-ar="إدارة صلاحيات السوبر أدمن" data-en="Super Admin Permissions Management">إدارة صلاحيات السوبر أدمن</div>
      <img src="/icon/hospital-logo.png" alt="شعار المستشفى" class="header-logo">
      <button id="langToggle" class="lang-toggle-btn">
        <img src="/icon/lang.png" alt="language" class="lang-icon" />
        <span id="langText">العربية | English</span>
      </button>
    </div>
  </header>

  <main class="main-content">
    <!-- معلومات المستخدم الحالي -->
    <div class="current-user-info">
      <h3 data-ar="السوبر أدمن الحالي" data-en="Current Super Admin">السوبر أدمن الحالي</h3>
      <div id="currentUserInfo" class="user-info">
        <!-- معلومات المستخدم ستُضاف هنا ديناميكياً -->
      </div>
    </div>

    <!-- إدارة الأدوار -->
    <div class="roles-section">
      <h3 data-ar="إدارة أدوار السوبر أدمن والصلاحيات" data-en="Super Admin Roles and Permissions Management">إدارة أدوار السوبر أدمن والصلاحيات</h3>
      
      <!-- قائمة الأدوار -->
      <div class="roles-list">
        <div class="role-card" data-role="SUPER_ADMIN">
          <div class="role-header">
            <h4 data-ar="مدير النظام (Super Admin)" data-en="System Administrator (Super Admin)">مدير النظام (Super Admin)</h4>
            <span class="role-badge super-admin">Super Admin</span>
          </div>
          <div class="role-description">
            <p data-ar="صلاحيات كاملة على جميع أجزاء النظام" data-en="Full permissions on all system components">صلاحيات كاملة على جميع أجزاء النظام</p>
          </div>
          <div class="role-permissions">
            <h5 data-ar="الصلاحيات:" data-en="Permissions:">الصلاحيات:</h5>
            <ul>
              <li data-ar="إدارة جميع المستخدمين والأدوار" data-en="Manage all users and roles">إدارة جميع المستخدمين والأدوار</li>
              <li data-ar="الوصول لجميع الصفحات والوظائف" data-en="Access all pages and functions">الوصول لجميع الصفحات والوظائف</li>
              <li data-ar="إدارة الأقسام والهيكل التنظيمي" data-en="Manage departments and organizational structure">إدارة الأقسام والهيكل التنظيمي</li>
              <li data-ar="تتبع الشكاوى والإشعارات" data-en="Track complaints and notifications">تتبع الشكاوى والإشعارات</li>
              <li data-ar="استرجاع البيانات المحذوفة" data-en="Restore deleted data">استرجاع البيانات المحذوفة</li>
              <li data-ar="إدارة صلاحيات جميع الأدوار" data-en="Manage permissions for all roles">إدارة صلاحيات جميع الأدوار</li>
            </ul>
          </div>
        </div>

        <div class="role-card" data-role="ADMIN">
          <div class="role-header">
            <h4 data-ar="مدير قسم (Admin)" data-en="Department Manager (Admin)">مدير قسم (Admin)</h4>
            <span class="role-badge admin">Admin</span>
          </div>
          <div class="role-description">
            <p data-ar="إدارة قسم محدد والموظفين التابعين له" data-en="Manage a specific department and its employees">إدارة قسم محدد والموظفين التابعين له</p>
          </div>
          <div class="role-permissions">
            <h5 data-ar="الصلاحيات:" data-en="Permissions:">الصلاحيات:</h5>
            <ul>
              <li data-ar="إدارة شكاوى قسمه فقط" data-en="Manage complaints of their department only">إدارة شكاوى قسمه فقط</li>
              <li data-ar="إدارة موظفي قسمه" data-en="Manage employees of their department">إدارة موظفي قسمه</li>
              <li data-ar="عرض تقارير قسمه" data-en="View department reports">عرض تقارير قسمه</li>
              <li data-ar="إسناد الشكاوى لموظفي قسمه" data-en="Assign complaints to department employees">إسناد الشكاوى لموظفي قسمه</li>
              <li data-ar="إدارة صلاحيات موظفي قسمه" data-en="Manage permissions of department employees">إدارة صلاحيات موظفي قسمه</li>
            </ul>
          </div>
          <div class="role-actions">
            <button onclick="editRolePermissions('ADMIN')" class="edit-btn" data-ar="تعديل الصلاحيات" data-en="Edit Permissions">تعديل الصلاحيات</button>
          </div>
        </div>

        <div class="role-card" data-role="EMPLOYEE">
          <div class="role-header">
            <h4 data-ar="موظف (Employee)" data-en="Employee">موظف (Employee)</h4>
            <span class="role-badge employee">Employee</span>
          </div>
          <div class="role-description">
            <p data-ar="صلاحيات محدودة للعمل اليومي" data-en="Limited permissions for daily work">صلاحيات محدودة للعمل اليومي</p>
          </div>
          <div class="role-permissions">
            <h5 data-ar="الصلاحيات:" data-en="Permissions:">الصلاحيات:</h5>
            <ul>
              <li data-ar="عرض الشكاوى المسندة له" data-en="View assigned complaints">عرض الشكاوى المسندة له</li>
              <li data-ar="الرد على الشكاوى" data-en="Reply to complaints">الرد على الشكاوى</li>
              <li data-ar="تحديث حالة الشكاوى" data-en="Update complaint status">تحديث حالة الشكاوى</li>
              <li data-ar="إضافة تعليقات على الشكاوى" data-en="Add comments to complaints">إضافة تعليقات على الشكاوى</li>
              <li data-ar="عرض تقاريره الشخصية" data-en="View personal reports">عرض تقاريره الشخصية</li>
            </ul>
          </div>
          <div class="role-actions">
            <button onclick="editRolePermissions('EMPLOYEE')" class="edit-btn" data-ar="تعديل الصلاحيات" data-en="Edit Permissions">تعديل الصلاحيات</button>
          </div>
        </div>
      </div>
    </div>

    <!-- إدارة صلاحيات المستخدمين -->
    <div class="user-permissions-section">
      <h3 data-ar="إدارة صلاحيات المستخدمين" data-en="User Permissions Management">إدارة صلاحيات المستخدمين</h3>
      
      <!-- فلاتر البحث -->
      <div class="filters-section">
        <div class="filter-group">
          <label data-ar="الدور:" data-en="Role:">الدور:</label>
          <select id="roleFilter">
            <option value="" data-ar="جميع الأدوار" data-en="All Roles">جميع الأدوار</option>
            <option value="SUPER_ADMIN" data-ar="مدير النظام" data-en="System Administrator">مدير النظام</option>
            <option value="ADMIN" data-ar="مدير قسم" data-en="Department Manager">مدير قسم</option>
            <option value="EMPLOYEE" data-ar="موظف" data-en="Employee">موظف</option>
          </select>
        </div>

        <div class="filter-group">
          <label data-ar="القسم:" data-en="Department:">القسم:</label>
          <select id="departmentFilter">
            <option value="" data-ar="جميع الأقسام" data-en="All Departments">جميع الأقسام</option>
          </select>
        </div>

        <div class="filter-group">
          <label data-ar="البحث:" data-en="Search:">البحث:</label>
          <input type="text" id="searchFilter" placeholder="البحث في المستخدمين...">
        </div>

        <button onclick="applyFilters()" class="filter-btn" data-ar="تطبيق الفلاتر" data-en="Apply Filters">تطبيق الفلاتر</button>
        <button onclick="clearFilters()" class="clear-btn" data-ar="مسح الفلاتر" data-en="Clear Filters">مسح الفلاتر</button>
      </div>

      <!-- جدول المستخدمين -->
      <div class="table-container">
        <table id="usersTable" class="data-table">
          <thead>
            <tr>
              <th data-ar="اسم المستخدم" data-en="User Name">اسم المستخدم</th>
              <th data-ar="البريد الإلكتروني" data-en="Email">البريد الإلكتروني</th>
              <th data-ar="القسم" data-en="Department">القسم</th>
              <th data-ar="الدور الحالي" data-en="Current Role">الدور الحالي</th>
              <th data-ar="تاريخ الانضمام" data-en="Join Date">تاريخ الانضمام</th>
              <th data-ar="الإجراءات" data-en="Actions">الإجراءات</th>
            </tr>
          </thead>
          <tbody id="usersTableBody">
            <!-- البيانات ستُضاف هنا ديناميكياً -->
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Modal تعديل صلاحيات الدور -->
  <div id="rolePermissionsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h3 id="roleModalTitle" data-ar="تعديل صلاحيات الدور" data-en="Edit Role Permissions">تعديل صلاحيات الدور</h3>
      <div id="rolePermissionsForm" class="permissions-form">
        <!-- نموذج الصلاحيات سيُضاف هنا ديناميكياً -->
      </div>
      <div class="modal-actions">
        <button onclick="saveRolePermissions()" class="save-btn" data-ar="حفظ التغييرات" data-en="Save Changes">حفظ التغييرات</button>
        <button onclick="closeRoleModal()" class="cancel-btn" data-ar="إلغاء" data-en="Cancel">إلغاء</button>
      </div>
    </div>
  </div>

  <!-- Modal تعديل صلاحيات المستخدم -->
  <div id="userPermissionsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h3 id="userModalTitle" data-ar="تعديل صلاحيات المستخدم" data-en="Edit User Permissions">تعديل صلاحيات المستخدم</h3>
      <div id="userPermissionsForm" class="permissions-form">
        <!-- نموذج صلاحيات المستخدم سيُضاف هنا ديناميكياً -->
      </div>
      <div class="modal-actions">
        <button onclick="saveUserPermissions()" class="save-btn" data-ar="حفظ التغييرات" data-en="Save Changes">حفظ التغييرات</button>
        <button onclick="closeUserModal()" class="cancel-btn" data-ar="إلغاء" data-en="Cancel">إلغاء</button>
      </div>
    </div>
  </div>

  <script src="superAdminProtection.js"></script>
  <script src="permissions.js"></script>
</body>
</html>
