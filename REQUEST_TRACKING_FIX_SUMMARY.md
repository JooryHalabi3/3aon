# ุฅุตูุงุญ ุตูุญุฉ ุชุชุจุน ุงูุทูุจุงุช

## ุงููุดููุฉ
ูุงูุช ุตูุญุฉ "ุชุชุจุน ุงูุทูุจุงุช" ูุง ุชุธูุฑ ุฃู ุทูุจุงุช ูุฃู ุงูููุฏ ูุงู ูุญุงูู ุงููุตูู ุฅูู ุฌุฏูู `requests` ุงููุงุฑุบุ ุจูููุง ุงูุทูุจุงุช ูุญููุธุฉ ูู ุฌุฏูู `complaints`.

## ุงูุญู ุงููุทุจู

### 1. ุชุนุฏูู API Endpoints ูู `backend/routes/adminRoutes.js`

#### ุฃ. ุชุนุฏูู ุฌูุจ ุงูุทูุจุงุช (`GET /api/admin/requests`)
- **ูุจู**: ูุงู ูุณุชุฎุฏู ุฌุฏูู `requests` ุงููุงุฑุบ
- **ุจุนุฏ**: ูุณุชุฎุฏู ุฌุฏูู `complaints` ูุน ุชุญููู ุงูุจูุงูุงุช
- **ุงูุชุบููุฑุงุช**:
  - `ComplaintID` โ `RequestID`
  - `ComplaintDetails` โ `Subject` ู `Description`
  - ุชุญููู `ComplaintType` ูู ุงูุนุฑุจูุฉ ุฅูู ุงูุฅูุฌููุฒูุฉ
  - ุชุญููู `CurrentStatus` ูู ุงูุนุฑุจูุฉ ุฅูู ุงูุฅูุฌููุฒูุฉ

#### ุจ. ุชุนุฏูู ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช (`GET /api/admin/requests/stats`)
- **ูุจู**: ูุงู ูุณุชุฎุฏู ุฌุฏูู `requests` ุงููุงุฑุบ
- **ุจุนุฏ**: ูุณุชุฎุฏู ุฌุฏูู `complaints` ูุน ุงูุญุงูุงุช ุงูุนุฑุจูุฉ
- **ุงูุชุบููุฑุงุช**:
  - `'ุฌุฏูุฏุฉ'` โ `pendingRequests`
  - `'ููุฏ ุงููุนุงูุฌุฉ'` โ `inProgressRequests`
  - `'ูุบููุฉ'` โ `completedRequests`

#### ุฌ. ุชุนุฏูู ุฎุท ุณูุฑ ุงูุทูุจ (`GET /api/admin/requests/:id/workflow`)
- **ูุจู**: ูุงู ูุณุชุฎุฏู ุฌุฏูู `request_workflow` ุงููุงุฑุบ
- **ุจุนุฏ**: ูุณุชุฎุฏู ุฌุฏูู `complainthistory`
- **ุงูุชุบููุฑุงุช**:
  - `HistoryID` โ `WorkflowID`
  - `Stage` โ `Action`
  - `Remarks` โ `Description`
  - `Timestamp` โ `CreatedAt`

#### ุฏ. ุชุนุฏูู ุชุญููู ุงูุทูุจ (`POST /api/admin/requests/:id/transfer`)
- **ูุจู**: ูุงู ูุณุชุฎุฏู ุฌุฏูู `requests`
- **ุจุนุฏ**: ูุณุชุฎุฏู ุฌุฏูู `complaints`
- **ุงูุชุบููุฑุงุช**:
  - ุชุญุฏูุซ `EmployeeID` ู `DepartmentID` ูู ุฌุฏูู `complaints`
  - ุฅุถุงูุฉ ุณุฌู ูู `complainthistory`
  - ุฅุฑุณุงู ุฅุดุนุงุฑ ููููุธู ุงููุญูู ุฅููู

#### ู. ุฅุถุงูุฉ ุชุนููู ุงูุทูุจ (`PUT /api/admin/requests/:id/assign`)
- **ุฌุฏูุฏ**: endpoint ูุชุนููู ุทูุจ ูููุธู ูุนูู
- **ุงููุธุงุฆู**:
  - ุชุญุฏูุซ `EmployeeID` ูู ุฌุฏูู `complaints`
  - ุฅุถุงูุฉ ุณุฌู ูู `complainthistory`
  - ุฅุฑุณุงู ุฅุดุนุงุฑ ููููุธู ุงููุนูู

### 2. ุชุญููู ุงูุจูุงูุงุช

#### ุชุญููู ุฃููุงุน ุงูุดูุงูู
```sql
CASE 
  WHEN ct.TypeName LIKE '%ุทุจู%' THEN 'medical'
  WHEN ct.TypeName LIKE '%ุฅุฏุงุฑู%' THEN 'administrative'
  ELSE 'technical'
END as ComplaintType
```

#### ุชุญููู ุญุงูุงุช ุงูุทูุจุงุช
```sql
CASE 
  WHEN c.CurrentStatus = 'ุฌุฏูุฏุฉ' THEN 'pending'
  WHEN c.CurrentStatus = 'ููุฏ ุงููุนุงูุฌุฉ' THEN 'in_progress'
  WHEN c.CurrentStatus = 'ูุบููุฉ' THEN 'completed'
  ELSE 'pending'
END as Status
```

### 3. ููู ุงูุงุฎุชุจุงุฑ
ุชู ุฅูุดุงุก `test-request-tracking.html` ูุงุฎุชุจุงุฑ:
- ุฌูุจ ุงูุทูุจุงุช
- ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช
- ุฎุท ุณูุฑ ุงูุทูุจ
- ุฌูุจ ุงูุฃูุณุงู
- ุฌูุจ ููุธูู ุงููุณู

## ุงููุชูุฌุฉ

### โ ูุง ุชู ุฅุตูุงุญู
1. **ุนุฑุถ ุงูุทูุจุงุช**: ุงูุขู ุชุธูุฑ ุฌููุน ุงูุดูุงูู ูู ุฌุฏูู `complaints`
2. **ุงูุฅุญุตุงุฆูุงุช**: ุชุนุฑุถ ุงูุฃุฑูุงู ุงูุตุญูุญุฉ ููุทูุจุงุช
3. **ุฎุท ุงูุณูุฑ**: ูุนุฑุถ ุชุงุฑูุฎ ุงูุดููู ูู ุฌุฏูู `complainthistory`
4. **ุชุญููู ุงูุทูุจุงุช**: ูุนูู ูุน ุฌุฏูู `complaints`
5. **ุชุนููู ุงูุทูุจุงุช**: endpoint ุฌุฏูุฏ ูุชุนููู ุงูุทูุจุงุช

### ๐ ุงูุจูุงูุงุช ุงููุชุงุญุฉ
- **12 ุดููู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุญุงูุงุช ูุฎุชููุฉ**: ุฌุฏูุฏุฉุ ููุฏ ุงููุนุงูุฌุฉุ ูุบููุฉ
- **ุฃููุงุน ูุฎุชููุฉ**: ุทุจูุฉุ ุฅุฏุงุฑูุฉุ ุชูููุฉ
- **ุฃูุณุงู ูุฎุชููุฉ**: ููุฒุนุฉ ุนูู 70 ูุณู

### ๐ง ุงููููุงุช ุงููุนุฏูุฉ
1. `backend/routes/adminRoutes.js` - ุชุนุฏูู ุฌููุน API endpoints
2. `test-request-tracking.html` - ููู ุงุฎุชุจุงุฑ ุฌุฏูุฏ

### ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ
1. ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ admin
2. ูุชุญ `test-request-tracking.html`
3. ุงุฎุชุจุงุฑ ุฌููุน API endpoints
4. ูุชุญ ุตูุญุฉ ุชุชุจุน ุงูุทูุจุงุช ููุชุฃูุฏ ูู ุนุฑุถ ุงูุจูุงูุงุช

## ููุงุญุธุงุช ุชูููุฉ

### ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู
- ุงูุญู ูุญุงูุธ ุนูู ุงูุชูุงูู ูุน ุจุงูู ุฃุฌุฒุงุก ุงููุธุงู
- ูุณุชุฎุฏู ููุณ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- ูุญุงูุธ ุนูู ููุณ ูููู API responses

### ุงูุฃูุงู
- ุฌููุน endpoints ูุญููุฉ ุจู admin authentication
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
- ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ูู `complainthistory`

### ุงูุฃุฏุงุก
- ุงุณุชุฎุฏุงู JOINs ูุญุณูุฉ
- ููุงุฑุณ ููุงุณุจุฉ ุนูู ุงูุฃุนูุฏุฉ ุงููููุฉ
- ุงุณุชุนูุงูุงุช ูุญุณูุฉ ููุฅุญุตุงุฆูุงุช
