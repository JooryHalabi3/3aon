# تعليمات اختبار قائمة المسؤول المنسدلة

## المشكلة المبلغ عنها
المستخدم أبلغ أن قائمة "المسؤول" لا تظهر كقائمة منسدلة في صفحة `admin/request-tracking.html`.

## الحل المطبق
تم إصلاح المشكلة من خلال:

1. **إزالة الدالة المكررة**: كان هناك دالتان `displayRequests` في الملف، الأولى تعرض نص بسيط والثانية تعرض القائمة المنسدلة. تم إزالة الدالة الأولى والاحتفاظ بالثانية.

2. **إضافة فحص المصادقة**: تم إضافة فحص لتسجيل الدخول في بداية الصفحة.

3. **تحسين معالجة الأخطاء**: تم إضافة رسائل خطأ أكثر وضوحاً.

## كيفية الاختبار

### الخطوة 1: تسجيل الدخول
1. افتح المتصفح واذهب إلى: `http://localhost:3001/login/home.html`
2. سجل الدخول باستخدام بيانات Admin أو Super Admin:
   - **Admin**: `admin@hospital.com` / `admin123`
   - **Super Admin**: `superadmin@hospital.com` / `super123`

### الخطوة 2: الوصول لصفحة تتبع الطلبات
1. بعد تسجيل الدخول، اذهب إلى: `http://localhost:3001/admin/request-tracking.html`
2. تأكد من أن الصفحة تحمل البيانات بشكل صحيح

### الخطوة 3: اختبار القائمة المنسدلة
1. في جدول الطلبات، ابحث عن عمود "المسؤول"
2. يجب أن ترى نص "غير محدد" مع سهم ▼
3. انقر على النص لفتح القائمة المنسدلة
4. يجب أن تظهر قائمة تحتوي على:
   - قائمة منسدلة للأقسام
   - قائمة منسدلة للموظفين (معطلة حتى اختيار قسم)
   - مربع نص للملاحظات
   - زر "تعيين"

### الخطوة 4: اختبار الوظائف
1. اختر قسماً من القائمة الأولى
2. يجب أن تتاح قائمة الموظفين
3. اختر موظفاً
4. أضف ملاحظات (اختياري)
5. اضغط "تعيين"
6. يجب أن يظهر تأكيد وتغلق القائمة

## ملف الاختبار
تم إنشاء ملف `test-dropdown.html` لاختبار الوظائف بدون الحاجة لتسجيل الدخول.

## استكشاف الأخطاء

### إذا لم تظهر القائمة المنسدلة:
1. تأكد من تسجيل الدخول
2. افتح وحدة تحكم المتصفح (F12) وتحقق من وجود أخطاء
3. تأكد من أن الخادم يعمل على المنفذ 3001

### إذا لم تظهر الأقسام:
1. تأكد من وجود بيانات في جدول `departments`
2. تحقق من أن API endpoint `/admin/departments` يعمل

### إذا لم تظهر الموظفين:
1. تأكد من وجود بيانات في جدول `employees`
2. تحقق من أن API endpoint `/admin/departments/:id/employees` يعمل

## الملفات المعدلة
- `admin/request-tracking.js`: إصلاح دالة `displayRequests` وإضافة فحص المصادقة
- `admin/request-tracking.css`: الأنماط موجودة بالفعل
- `backend/routes/adminRoutes.js`: نقاط النهاية موجودة بالفعل

## النتيجة المتوقعة
بعد تطبيق الإصلاحات، يجب أن تظهر قائمة "المسؤول" كقائمة منسدلة تفاعلية تسمح باختيار الأقسام والموظفين وتعيين المسؤولين على الطلبات.
